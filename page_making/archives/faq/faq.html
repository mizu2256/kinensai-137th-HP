<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>137周年記念祭 - ご案内</title>

    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="faq.css">

    <link rel="shortcut icon" href="pictures/logo.png" type="image/x-icon">
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script>
        $(function () {
            $(document).on('click', '#submit', function () {
                var address = $('#address').val();
                var content = $('#content').val();
                if (!address || !content) { alert("アドレスか質問内容に文字列が入力されていません"); return; } else
                    if (!confirm(`入力内容に間違いはありませんか？\n メールアドレス: ${address}`)) return;
                console.log("clicked");
                $(".form").css('display', 'none');
                $(".submitting").css('display', 'block');
                new Promise((resolve, reject) => {
                    setTimeout(() => {
                        resolve("foo");
                    }, 1000);
                }).then((val) => {
                    $(".submitting").css('display', 'none');
                    $(".thanks").css('display', 'block');
                    console.log(content);
                });
            });
            $('.address').focus(function () {
                if (!$(this).parent().children(".question").eq(0).hasClass(".kotei"))
                    $(this).parent().children(".question").eq(0).css('animation', 'linear 0.075s shuunou').addClass("shuunou");
                $(this).parent().children(".question").eq(0).removeClass("kotei");
            });
            $('.address').blur(function () {
                if ($(this).val() == "")
                    $(this).parent().children(".question").eq(0).css('animation', 'linear 0.075s kakudai').removeClass("shuunou");
                else $(this).parent().children(".question").eq(0).addClass("kotei");
            });
            $('.content').on('input', function (e) {
                var val = $('.content').val();
                var cwidth = $('.content').width();
                var spl = val.split('\n');
                var n = spl.length;
                var u = n;
                for (let i=0;i<n;i++)
                    u += Math.floor(spl[i].split('').length * 16 / cwidth);
                if (u >= 3)
                    $('.content').attr('rows', u);
                else
                    $('.content').attr('rows', 3);
            });
        });
    </script>
</head>

<body>
    <header>
        <div class="wrapper">
            <div class="header-con">
                <div class="main-logo">
                    <a href="#">
                        <img src="pictures/logo.png" alt="ロゴ">
                        <h1>記念祭</h1>
                    </a>
                </div>

                <div class="nav-con">
                    <nav class="nav-links">
                        <ul>
                            <li><a href="#">HOME</a></li>
                            <li><a href="#">企画説明</a></li>
                            <li><a href="#">テーマ解説</a></li>
                            <li><a href="#">パンフレット</a></li>
                            <li><a href="#">ご案内</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ここから編集 -->
    <main>
        <div class="main">
            <div class="form">
                <div class="midashi">お問い合わせフォーム</div>
                <div class="box">
                    <div class="explanation">
                        <div>メールアドレス</div>
                        <div>例: example@tokai-jh.ed.jp</div>
                    </div>
                    <div class="answer">
                        <div class="question" id="q1">貴方様のメールアドレス</div>
                        <input class="address" id="address" />
                    </div>
                </div>
                <div class="box">
                    <div class="explanation">
                        <div>ご質問内容</div>
                        <div>例: 学校の敷地内に入るために予約は必要ですか？</div>
                        <div>質問は複数あっても構いません。</div>
                    </div>
                    <div class="answer">
                        <textarea class="content" id="content" rows="3" placeholder="✎"></textarea>
                    </div>
                </div>
                <div class="subsubmit"><button id="submit">送信</button></div>
            </div>
            <div class="submitting">送信中...</div>
            <div class="thanks">
                お問い合わせありがとうございました。お問い合わせ内容への回答は数日以内にメールをお送りいたします。
            </div>
        </div>
    </main>
    <!-- ここまで編集 -->
</body>

</html>