<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>137周年記念祭 - お問い合わせフォーム</title>

    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/components/header.css">
    <link rel="stylesheet" href="assets/css/components/footer.css">
    <link rel="stylesheet" href="assets/css/components/header-media.css">
    <link rel="stylesheet" href="assets/css/components/footer-media.css">
    <link rel="stylesheet" href="assets/css/pages/faq.css">
    <link rel="stylesheet" href="assets/css/media/faq-media.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

    <link rel="shortcut icon" href="assets/pictures/common/favicon.ico" type="image/x-icon" sizes="any">

    <link rel="prefetch" href="../brochure/brochure.html">
    <link rel="prefetch" href="../faq/faq.html">
    <link rel="prefetch" href="../home/index.html">
    <link rel="prefetch" href="..//info/info.html">
    <link rel="prefetch" href="..//project/project.html">
    <link rel="prefetch" href="..//theme/theme.html">

    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script>
        $(function () {
            $(document).on('click', '#submit', function () {
                var address = $('#address').val();
                var content = $('#content').val();
                address = removespace(address);
                if (!address || !content) { alert("アドレスか質問内容に文字列が入力されていません"); return; } else
                    if (!checkaddress(address)) return; else if (!confirm(`入力内容に間違いはありませんか？\n メールアドレス: ${address}`)) return;
                console.log("clicked");
                $(".form").css('display', 'none');
                $(".submitting").css('display', 'block');
                new Promise((resolve, reject) => {
                    setTimeout(() => {
                        resolve("foo");
                    }, 1000);
                }).then((val) => {
                    $(".submitting").css('display', 'none');
                    $(".thanks").css('display', 'block');
                    $(".return").css('display', 'block');
                    $(".main").css('flex-direction', 'column');
                    console.log(content);
                });
            });
            $('.address').focus(function () {
                if (!$(this).parent().children(".question").eq(0).hasClass(".kotei"))
                    $(this).parent().children(".question").eq(0).css('animation', 'linear 0.075s shuunou').addClass("shuunou");
                $(this).parent().children(".question").eq(0).removeClass("kotei");
            });
            $('.address').blur(function () {
                if ($(this).val() == "")
                    $(this).parent().children(".question").eq(0).css('animation', 'linear 0.075s kakudai').removeClass("shuunou");
                else $(this).parent().children(".question").eq(0).addClass("kotei");
            });
            $('.content').on('input', function (e) {
                var val = $('.content').val();
                var cwidth = $('.content').width();
                var spl = val.split('\n');
                var n = spl.length;
                var u = n;
                for (let i = 0; i < n; i++) {
                    console.log(spl[i].split('').length);
                    u += Math.ceil(spl[i].split('').length * 16 / cwidth);
                }
                if (u >= 3)
                    $('.content').attr('rows', u);
                else
                    $('.content').attr('rows', 3);
            });

            function removespace(address) {
                var str = address.split(" ").join("");
                var str2 = str.split("　").join("");
                return str2;
            }

            function checkaddress(address) {
                var b = true;
                var string = [];
                if (!address.split("").includes("@")) { string.push("メールアドレスに@が含まれていません。"); b = false; }
                else if (!address.split("@")[1].includes(".")) { string.push("@の後には～.comや～.jpなどが入ります。"); b = false; }
                if (address.split("@")[0] == "") { string.push("@の前に何も書かれていません。"); b = false; }
                if (!b) alert(string.join("\n"));
                return b;
            }
        });
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4HDWLDJ661"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-4HDWLDJ661');
    </script>
</head>

<body>
    <header>
        <div class="wrapper">
            <div class="header-con">
                <div class="main-logo">
                    <a href="index.html">
                        <img src="assets/pictures/common/logo.webp" alt="ロゴ">
                        <h2>記念祭</h2>
                    </a>
                </div>

                <div id="burger-menu" class="burger-menu">
                    <i class="fa-solid fa-bars toggle-burger open-burger active"></i>
                    <i class="fa-solid fa-xmark toggle-burger close-burger"></i>
                </div>

                <div class="nav-con hide">
                    <nav class="nav-links">
                        <ul>
                            <li><a href="index.html">HOME</a></li>
                            <li><a href="project.html">企画説明</a></li>
                            <li><a href="theme.html">テーマ解説</a></li>
                            <li><a href="brochure.html">パンフレット</a></li>
                            <li><a href="info.html">ご案内</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ここから編集 -->
    <main>
        <section id="top">
            <div class="wrapper">
                <div class="top-con">
                    <div class="top-info">
                        <h1>お問い合わせ</h1>
                    </div>
                </div>
            </div>
        </section>
        <div class="wait">
            <p>準備中です。</p>
            <p>しばらくお待ちください。</p>
        </div>
        <div class="main">
            <div class="form">
                <div class="box">
                    <div class="explanation">
                        <div>メールアドレス</div>
                        <div>
                            <div>例: </div>
                            <div>example@tokai-jh.ed.jp</div>
                        </div>
                    </div>
                    <div class="answer">
                        <div class="question" id="q1">メールアドレス</div>
                        <input class="address" id="address" />
                    </div>
                </div>
                <div class="box">
                    <div class="explanation">
                        <div>お問い合わせ内容</div>
                        <div>
                            <div>例: </div>
                            <div>学校の敷地内に入るために予約は必要ですか？</div>
                        </div>
                        <div>質問は複数あっても構いません。</div>
                    </div>
                    <div class="answer">
                        <textarea class="content" id="content" rows="3" placeholder="✎"></textarea>
                    </div>
                </div>
                <div class="subsubmit"><button id="submit">
                        <div>　</div>
                        <div>送信</div>
                        <div>➔</div>
                    </button></div>
            </div>
            <div class="submitting">送信中です。<br>しばらくお待ちください。</div>
            <div class="thanks">
                ありがとうございました。<br>お問い合わせ内容への回答は数日以内にメールをお送りいたします。
            </div>
            <div class="return">
                <a href="index.html">
                    <div>➔</div>
                    <div>ホームに戻る</div>
                </a>
            </div>
        </div>
    </main>
    <!-- ここまで編集 -->
    <footer>
        <div class="wrapper">
            <div class="footer-con">
                <div class="footer-info">
                    <div class="footer-media">
                        <div class="tokai-info">
                            <h2>東海中学校・高等学校</h2>
                            <p>愛知県名古屋市東区筒井一丁目2-35</p>
                            <a href="faq.html">お問い合わせフォーム</a>
                        </div>
                        <div class="trip-to-tokai">
                            <p>#TripToTokai</p>
                        </div>
                    </div>
                    <div class="follow-us">
                        <h2>Follow Us</h2>
                        <div class="sns">
                            <a href="https://x.com/kinensai">
                                <i class="fa-brands fa-x-twitter"></i>
                            </a>
                            <a href="https://www.instagram.com/tokaikinensai/">
                                <i class="fa-brands fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script src="assets/js/components/header.js"></script>
</body>

</html>