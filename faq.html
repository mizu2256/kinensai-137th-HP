<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>137周年記念祭 - お問い合わせフォーム</title>

    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/components/header.css">
    <link rel="stylesheet" href="assets/css/components/footer.css">
    <link rel="stylesheet" href="assets/css/components/header-media.css">
    <link rel="stylesheet" href="assets/css/components/footer-media.css">
    <link rel="stylesheet" href="assets/css/pages/faq.css">
    <link rel="stylesheet" href="assets/css/media/faq-media.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

    <link rel="shortcut icon" href="assets/pictures/common/favicon.ico" type="image/x-icon" sizes="any">

    <link rel="prefetch" href="brochure.html">
    <link rel="prefetch" href="faq.html">
    <link rel="prefetch" href="index.html">
    <link rel="prefetch" href="info.html">
    <link rel="prefetch" href="project.html">
    <link rel="prefetch" href="theme.html">

    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script>
        $(function () {
            var opened = false;
            $(document).on('click', '#submit', function () {
                var content = $('#content').val();
                if (!confirm(`送信しますか？`)) return;
                $(".form").css('display', 'none');
                $(".submitting").css('display', 'block');
                $(".submitting").css('display', 'none');
                $(".thanks").css('display', 'block');
                $(".return").css('display', 'flex');
                $(".main").css('flex-direction', 'column');
                $(".rev-con").text(content);
                $(".review").css('display', 'inline-block');

                const subject = '137周年記念祭についてのお問い合わせ';
                const body = `お問い合わせ内容\n${content}\n\nメールアドレスは、お問い合わせをいただいた方への対応以外の目的では使用しません。`;

                const mailtoLink = `mailto:kinensai137th.soumu@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

                window.location.href = mailtoLink;
            });
            $(document).on('click', '.rev', function () {
                if (!opened) {
                    $('.rev-con').removeClass('hidden');
                    opened = true;
                } else {
                    $('.rev-con').addClass('hidden');
                    opened = false;
                }
            });
            $('.content').on('input', function (e) {
                var val = $('.content').val();
                var cwidth = $('.content').width();
                var spl = val.split('\n');
                var n = spl.length;
                var u = n;
                for (let i = 0; i < n; i++) {
                    console.log(spl[i].split('').length);
                    u += Math.ceil(spl[i].split('').length * 16 / cwidth);
                }
                if (u >= 3)
                    $('.content').attr('rows', u);
                else
                    $('.content').attr('rows', 3);
            });
        });
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4HDWLDJ661"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-4HDWLDJ661');
    </script>
</head>

<body>
    <header>
        <div class="wrapper">
            <div class="header-con">
                <div class="main-logo">
                    <a href="index.html">
                        <img src="assets/pictures/common/logo.webp" alt="ロゴ">
                        <h2>記念祭</h2>
                    </a>
                </div>

                <div id="burger-menu" class="burger-menu">
                    <i class="fa-solid fa-bars toggle-burger open-burger active"></i>
                    <i class="fa-solid fa-xmark toggle-burger close-burger"></i>
                </div>

                <div class="nav-con hide">
                    <nav class="nav-links">
                        <ul>
                            <li><a href="index.html">HOME</a></li>
                            <li><a href="project.html">企画説明</a></li>
                            <li><a href="theme.html">テーマ解説</a></li>
                            <li><a href="brochure.html">パンフレット</a></li>
                            <li><a href="info.html">ご案内</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ここから編集 -->
    <main>
        <section id="top">
            <div class="wrapper">
                <div class="top-con">
                    <div class="top-info">
                        <h1>お問い合わせ</h1>
                    </div>
                </div>
            </div>
        </section>
        <div class="wait">
            <p>準備中です。</p>
            <p>しばらくお待ちください。</p>
        </div>
        <div class="main">
            <div class="wrapper">
                <div class="form">
                    <div class="box">
                        <div class="explanation">
                            <div>お問い合わせ内容</div>
                            <div>
                                <div>例: </div>
                                <div>学校の敷地内に入るために予約は必要ですか？</div>
                            </div>
                            <div>質問は複数あっても構いません。</div>
                        </div>
                        <div class="answer">
                            <textarea class="content" id="content" rows="3" placeholder="✎"></textarea>
                        </div>
                    </div>
                    <div class="subsubmit">
                        <button id="submit">
                            <div>　</div>
                            <div>送信</div>
                            <div>➔</div>
                        </button>
                    </div>
                    <div class="mail-info">
                        <p>送信ボタンクリック後、メールが起動します。</p>
                        <p>画像を添付される場合は、送信メールに直接添付してください。</p>
                    </div>
                </div>

                <div class="submitting">処理中です。<br>しばらくお待ちください。</div>
                <div class="thanks">
                    この先は各メールアプリの指示に従って送信してください。<br>ありがとうございました。
                </div>
                <div class="rev-wrapper">
                    <div class="review">
                        <div class="rev">もう一度送信内容を見る</div>
                        <div class="rev-con hidden"></div>
                    </div>
                </div>
                <div class="return">
                    <a href="index.html">
                        <div>➔</div>
                        <div>ホームに戻る</div>
                    </a>
                </div>
            </div>
        </div>
    </main>
    <!-- ここまで編集 -->
    <footer>
        <div class="wrapper">
            <div class="footer-con">
                <div class="footer-info">
                    <div class="footer-media">
                        <div class="tokai-info">
                            <h2>東海中学校・高等学校</h2>
                            <p>愛知県名古屋市東区筒井一丁目2-35</p>
                            <a href="faq.html">お問い合わせフォーム</a>
                        </div>
                        <div class="trip-to-tokai">
                            <p>#TripToTokai</p>
                        </div>
                    </div>
                    <div class="follow-us">
                        <h2>Follow Us</h2>
                        <div class="sns">
                            <a href="https://x.com/kinensai">
                                <i class="fa-brands fa-x-twitter"></i>
                            </a>
                            <a href="https://www.instagram.com/tokaikinensai/">
                                <i class="fa-brands fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script src="assets/js/components/header.js"></script>
</body>

</html>